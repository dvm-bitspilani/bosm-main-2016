<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script   src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>
	<div class="chessboard">
		<div class="flexrow">
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/1.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="white tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/2.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/3.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="white tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/4.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/5.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="white tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/6.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/7.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="white tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/8.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/9.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="white tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/10.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/11.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="white tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/12.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/13.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="white tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/14.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
			<div class="black tile flip" onclick="lighten(this)">
				<div class="card"> 
					<div class="face front"> 

					</div> 
					<div class="face back" style="background-image: url('img/gallery/15.jpg'); background-size:cover;"> 

					</div> 
				</div>
			</div>
		</div>
		<a href="#_" class="lightbox" onclick="$(this).fadeOut('fast')">
			<img src="img/gallery.jpg">
		</a>
	</div>


	<script type="text/javascript">
		$('.flip').mouseover(function(){
			$(this).find('.card').addClass('flipped').mouseleave(function(){
				$(this).removeClass('flipped');
			});
			return false;
		});

		
		$(document).ready(function()
		{
			setInterval(function(){
				var flip=Math.floor(Math.random() * (15 - 1 + 1)) + 1;
				// console.log(flip);

				var rantile1=$('.flexrow div:nth-child('+flip+') div');
				// console.log(rantile);
				rantile1.addClass('flipped');
				setTimeout(function(){
					rantile1.removeClass('flipped');
				},3000);

				do {
				var flip2=Math.floor(Math.random() * (15 - 1 + 1)) + 1;
				} while (flip===flip2);
				var rantile2=$('.flexrow div:nth-child('+flip2+') div');
				// console.log(rantile);
				rantile2.addClass('flipped');
				setTimeout(function(){
					rantile2.removeClass('flipped');
				},3000);
				do {
				var flip3=Math.floor(Math.random() * (15 - 1 + 1)) + 1;
				} while (flip===flip2 && flip2===flip3);
				var rantile3=$('.flexrow div:nth-child('+flip3+') div');
				// console.log(rantile);
				rantile3.addClass('flipped');
				setTimeout(function(){
					rantile3.removeClass('flipped');
				},3000);
			},4000);
		});

		function lighten (imgdiv) {
			var imgurl = $(imgdiv).find('.back').css('background-image');
			var cleanup = /\"|\'|\)/g;
			imgurl = imgurl.split('/').pop().replace(cleanup, '');
			$('.lightbox img').attr('src', 'img/gallery/'+imgurl);
			$('.lightbox').fadeIn('slow');

		}

	</script>
</body>
</html>